---
title: 우분투 20.04에서 22.04 업데이트
date: 2023-04-05 20:53:11 +9:00
categories: [Linux, Ubuntu]
tags: [우분투, 리눅스, "20.04", "22.04", update]
---
우분투 20.04를 잘 쓰고 있었지만, 어느 순간 부터 자꾸 22.04로 업데이트 하라는 팝업이 떠서 상당히 거슬렸었다. 이건 마치 윈도우 11 업그레이드를 권장하는 10? 10 업데이트를 권장하는 7? 뭐 그런 느낌…

기존에 있는 PC는 20.04에 그래픽 드라이버가 잘 설치되어 있고 사실 별 내용은 없지만 그래도 어느정도 환경구축이 안정적으로 되어 있는 상태이기에, 밀어버리기에는 조금 부담이 있었지만, 역시 OS는 최신이지~ 라는 윈도우 사용자 적 관점을 가지고 업데이트 하기로 했다.

처음에는 클린설치를 하고 싶었지만, 기존 파일들을 일일히 백업하기는 너무나도 귀찮았다.
그래서 예전에 생각 없을 때는 성가실 정도로 줄기차게 22.04 업그레이드 창이 떴던 것을 기억하고 그렇게 업그레이드를 해보리라 마음먹었다.

지금 생각하면 그냥 빠르게 밀고 재설치가 나았을 것 같다는 생각이 든다.

막상 업데이트를 하려고 하니 그 창이 뜨지 않았다. 그래서 찾아 보니 20.04에서 22.04 업데이트를 위해서는 몇 가지 조건이 필요하다고 한다. 근데 예전에는 아무 생각 없이 막 썼는데 왜 업데이트 창이 떴는지는 의문.

그 조건이란

1. 기존에 깔려있는 그래픽 드라이버를 오픈 소스 드라이버로 변경
2. Software & Updates에 등록되어 있는 PPA의 제거
3. Updates에서 새 우분투 버전 알림 항목을 롱-텀 서뽀뜨 버전으로 변경

해당 요소를 모두 완료하였다면 이제 본격적으로 업그레이드에 나설 수 있다.
우분투에서 무언가를 하려 할 때 해서 나쁠 것 없다는
`sudo apt update`
`sudo apt full-upgrade` 

를 진행
그 후
`update-manager -d -c`
무언가를 업데이트 하라고 하면 그대로 해준다.

그리고 다시 입력하면 이제 up-to-date 창이 뜰 것이다.
거기서 Upgrade를 누르면 릴리즈 노트도 볼 수 있다. 다시 업그레이드 클릭
친절하게도 ROS가 깔려 있고, ROS는 우분투 버전 별로 지원을 엄격하게 하니 유의하라는 팝업이 뜬다.
그래서 또 ROS 를 삭제해주고 다시 진행했다.

여기서 "비록 중간에 되돌아가긴 했지만 GUI로 하니까 친절하게 알려주고, 이번엔 좀 순탄한데?" 라는 생각을 했다.

그러기가 무섭게 'Failed to download repository information' 창이 떴다.
Check your internet connection이라는 부연설명과 함께
열심히 try agian을 눌러보았지만 별 효과도 없었다. 물론 인터넷은 웹 브라우저로 잘만 접속되었다.

그래도 GUI 에서 친절하게 인터넷을 확인하라고 해 주었기에, 유선으로도 연결해보고, 공유기도 재부팅해보고, 랜카드 드라이버도 새로 잡아보았으나 문제가 없었다.

‘the repositiory is not signed’

처음에는 인터넷 문제인 줄 알고 와이파이도 건드려봤는데 생각해보니 리포지토리쪽 문제인것 같았다.

내 경우에는 cudnn이 문제였고, 그것 또한 일일히 제거해 주고 나서 진행해야만 했다.

PPA도 지우고 purge 명령어로 날리기도 했으니 당연히 남아있는게 없을거라는 생각을 한 게 화근이었다
그래서 이것저것 다 해보던 중 자세히 보니 KEY 값이 남아 있는 것이 문제가 되는 것 같았다.

그래서 수동으로 source.list.d 의 파일을 제거하여 해결할 수 있었다.
`cd /etc/apt/sources.list.d/`
 `ls`
해서 보면 문제가 된 파일들이 보일 것이다.
해당 파일들을
sudo rm cudnn~~~~ 으로 제거하고 다시 진행하니 이제 문제 없이 진행되었다.

결국 자정을 넘겨 하루가 지난 후에야 설치할 수 있었다.

잃은 것

- 시간
- 공유기 재부팅으로 인한 HA의 연결끊김 알림
- ROS
- 그래픽카드 드라이버

얻은 것

- 22.04
- 한글 입력 설정은 유지 됨

음… 최악이군…

오늘의 교훈 : 

1. 우분투는 윈도우와 다르다. 
2. 윈도우 사용자스러운 생각을 우분투에 대입하지 말자.