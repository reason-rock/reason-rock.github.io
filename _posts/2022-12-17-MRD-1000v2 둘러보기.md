---
title: MRD-1000v2 둘러보기
date: 2022-12-17 09:53:11 +9:00
categories: [Device Overview, GPS(Ko)]
tags: [MRD-100v2, MRD, MRP-2000, 시너렉스, ROS, ROS GPS, RTK. GPS]
---

GPS를 샀댄다. 어느날 가보니 그랬다.
뭘 샀냐고 물으니 시너렉스꺼 샀댄다. 
개인적으로 시너렉스사의 GPS에 감성적인 부분에서 만족도가 높지 않아서 별로 선호하지 않았지만.... 어쩌겠는가. 
나는 측위담당도 아니고, 구매권한도 없으니 그런갑다 해야지.
다만 만족도 하락에 기여한 원인중 하나가 장착부 설계시 마땅한 마운팅 브라켓이나 포인트가 없다는 점이었는데, 가볍게 묵살되어 슬펐다.

그렇게 온 GPS는 일주일 정도 지켜봤는데 졸업시즌이고 다들 바쁘신지 아무도 손을 안대길래 안바쁘고 시간 많은(?) 휴학생이 열어보기로 했다.


MRD-1000v2. 기존 GPS는 언박싱까지는 해보지 않았기에 어떤지 잘 모르겠으나 박스는 평범하다.
다만 열어보니 좋았던 점과 나빴던 점이 있었는데, 먼저 기존에 사용하던 MRP-2000에서의 불만에 대해 알아보자(하드웨어, 설계파트 한정)
<br>
<h4>MRP-2000의 단점(H/W)</h4>

1. 적당한 마운팅 부품 없고, 사방팔방에 나있는 포트
2. 떨구면 가볍게 깨질것 같은 플라스틱 바디
3. 위와 함께 이어지는 낮은 안정성-시리얼로는 값이 잘 나와도 한번씩 LCD 표출이 안되는 문제와, LCD가 아예 죽어버리는 문제가 있었다. 무슨 싸구려 아두이노 OLED도 아니고...(같은 부품일수도)
4. 잘 빠지고 부서지기 좋은 얇은 안테나 커넥터

<br>
<h4>MRD-1000v2에서의 변화(H/W)</h4>

1. 플라스틱에서 알루미늄으로의 발전은 상당히 인상적이었다. 발열처리 면에서도 조금 낫겠지
다만 아노다이징 퀄리티는 조금 그랬다. 뭔가 손으로 쓸면 미세한 가루가 묻어나오는 느낌<br>
<img src="/assets/img/MRD/MRD_1.jpg">

2. 사방팔방 나 있던 포트도 나름 발전해서 안테나는 상단, 나머지 포트는 우측에 몰아 두었다.
좋은 변화였다. 다만 여기서 개인적으로 퇴보했다 싶은 부분이 있는데, 기존에는 본체에 내장된 마이크로 5pin 전원/RS232 포트가, 주렁주렁한 하네스로 변경되었다는 점이었다.
개인적으로 MRD에서 가장 아쉬운 점이었다.
3. LCD는 동일한것 같았다. 
새제품이니 물론 지금은 잘 작동되었다. 단색이라 조금 많이 감성적으로 아쉬움.
4. 상단에 3가지 안테나 포트가 모두 위치했고, 커넥터도 일반적인 SMA로 통일되어 그나마 튼튼해 보였다.<br>
개인적으로 가장 만족하는 부분
<img src="/assets/img/MRD/MRD_3.jpg">

5. 기존 MRP는 GPS안테나가 꽤 고급스러워서 좋았는데, 이번 MRD는 무슨 알리익스프레스에서 싸구려 안드로이드 올인원을 사면 오는 그런 안테나가 와서 감성적으로 아쉬웠다.
왜 이렇게 자세하냐고? 그건 본인이 산 올인원에 거의 똑같이 생긴 안테나가 왔었기 때문이다.
<br>
<img src="/assets/img/MRD/MRD_2.jpg">


간단히 Ros에서 데이터 까지만 받아보고 집에 가야겠다고 생각했다. (그랬으면 안됐었는데...)

<h4>MRD-1000v2 초기 세팅(H/W)</h4>

1. 안테나 3개를 순서에 유의하여 장착한다.
2. 먼저 전원 및 시리얼 하네스를 측면 포트를 통해 연결한다.
3. 그중 적/흑 선을 적당한 전원에 연결하여 전력을 공급한다.
4. 전원이 켜지는 동안 RS-232 to usb 선을 PC와 연결한다.


<h4>MRD-1000v2 초기 세팅(S/W)</h4>

1. GPS에 사용되는 가장 일반적인 nmea 드라이버를 설치해 준다.
```
sudo apt-get install ros-noetic-nmea-navsat-driver
```
2. 연결되 포트 위치 확인 및 권한 설정
```
cd /dev
ls (GPS 포트 확인) 
sudo chmod 777 /dev/ttyUSB0 (포트에 권한 부여, ttyUSB0을 GPS 파일이라 가정)
```
3. nmea 실행
```
rosrun nmea_navsat_driver nmea_topic_serial_reader _port:=/dev/ttyUSB0 _baud:=115200
```
4. rostopic으로 값 확인하기
```
rostopic echo /nmea_sentence
```
5. 어라? 근데 안되네?



왜인진 몰라도 안되더라. 메세지가 제대로 출력이 안되고 있는건지, 버드레이트를 바꿔봐도 안되더라.
혹시나 실내라서 값이 안잡히는 건가 싶어 차에 얹어서 나가고 싶었지만, 차 한번 빼려면 테트리스를 해야하는 좁은 연구실의 비애로 인해 할 수 없었고... 최-첨단 GPS 테스트 플랫폼을 급조해서(아래 사진 참조) 비가 조금씩 내리는 와중에 끌고 나가 보았다.<br>
<img src="/assets/img/MRD/MRD_4.jpg">

어느정도 밖으로 들고 나가니 단말기 자체의 LCD에서는 좌표가 정상적으로 잡혔다.
LTE 우선, DMB 우선모드 그리고 출력형식을 일일히 다 바꿔보고, 메뉴얼에서는 아직 구현이 안되어 있다던 nmea 출력방식 옵션도 바꾸어 보았으나 똑같았다.
혹시나 nmea 설치가 잘못되었나 싶어 nmea 부터 Serial, Pyserial을 모두 제거후 일일히 재설치 해 보았지만 별 다른 진전은 없었다. 그러던 중 간단한 해결책이 생각났다.
에러가 뜨는 상태에서 시리얼 선만 뽑아 실내에 있는 차의 MRP에 연결해 보았는데, 좌표값은 0,0,0으로 나왔으나 최소한 에러는 뜨지않았다.
그래서 그걸 다시 빼서 MRD에 꽂으니? 다시 에러가 뜨기 시작했다.

혹시나 싶어서 메뉴얼을 다시 확인했으나 MRD와 MRP의 메세지 출력관련 차이는 전혀 없었다.

ROS 연동 매뉴얼이 MRP기준으로만 있고 MRD는 언급이 없던 이유가 이거였던 걸까?